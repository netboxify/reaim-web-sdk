!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("reaim-web-sdk",[],e):"object"==typeof exports?exports["reaim-web-sdk"]=e():t["reaim-web-sdk"]=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.REAIM_CLICK=e.REAIM_IMPRESSION=e.REAIM_STORAGE_NAME=e.REAIM_SUBS_API=e.REAIM_EVENTS_API=e.REAIM_SAVE_SUBSCRIPTION=e.REAIM_RETRY_USER=e.REAIM_UID=e.REAIM_PUSH_USER_SUBSCRIBED=e.REAIM_DENIED_ON_VISITS=e.REAIM_SDK_VISITS=e.PRODUCTION=void 0;e.PRODUCTION=!0;e.REAIM_SDK_VISITS="reaim_sdk_visits";e.REAIM_DENIED_ON_VISITS="reaim_sdk_denied_on_visits";e.REAIM_PUSH_USER_SUBSCRIBED="reaim_sdk_push_user_subscribed";e.REAIM_UID="reaim_sdk_uid";e.REAIM_RETRY_USER="reaim_sdk_retry_user";e.REAIM_SAVE_SUBSCRIPTION="reaim_save_subscription";e.REAIM_EVENTS_API="https://events.reaim.me";e.REAIM_SUBS_API="https://subs.reaim.me";e.REAIM_STORAGE_NAME="reaim_sdk_storage";e.REAIM_IMPRESSION="i";e.REAIM_CLICK="c"},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var c={};function l(){}function d(){}function p(){}var f={};f[o]=function(){return this};var h=Object.getPrototypeOf,m=h&&h(h(S([])));m&&m!==e&&n.call(m,o)&&(f=m);var v=p.prototype=l.prototype=Object.create(f);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,s){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v.constructor=p,p.constructor=d,p[a]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(y.prototype),y.prototype[i]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new y(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(v),v[a]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3),o=n(0),i=u(n(4)),a=u(n(5)),s=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){c(i,r,o,a,s,"next",t)}function s(t){c(i,r,o,a,s,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&"function"!=typeof e)throw new Error("Type of onAllow parameter should be function.");if(n&&"function"!=typeof n)throw new Error("Type of onBlock parameter should be function.");this.metaEndpoint=o.REAIM_SUBS_API,this.onAllow=e||r.noop,this.onBlock=n||r.noop}var e,n,u,c,p,f,h,m;return e=t,n=[{key:"log",value:function(t){console.log("ReAim SDK -",t)}},{key:"getMetadata",value:(m=l(s.default.mark((function t(){var e,n,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Intl.DateTimeFormat().resolvedOptions().timeZone,t.next=3,fetch(this.metaEndpoint+"/info?tz="+e);case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"canSubscribe",value:function(){return"default"===Notification.permission}},{key:"setAsSubscribed",value:function(){this.setValue(o.REAIM_PUSH_USER_SUBSCRIBED,!0)}},{key:"setAsUnsubscribed",value:function(){this.setValue(o.REAIM_PUSH_USER_SUBSCRIBED,!1)}},{key:"setValue",value:function(t,e){localStorage.setItem(t,e)}},{key:"removeValue",value:function(t){localStorage.removeItem(t)}},{key:"getValue",value:function(t){return localStorage.getItem(t)}},{key:"getSWPath",value:function(){return o.PRODUCTION?self.window&&self.window.REAIM_SW_PATH_GLOBAL||"/sw.js":"/reaim-sw.js"}},{key:"registerSW",value:function(){var t=this.getSWPath();return navigator.serviceWorker.register(t)}},{key:"prepareRequest",value:function(t,e){return{site_id:e.site_id,country_id:e.country_id,platform_id:e.platform_id,os_id:e.os_id,timezone_id:e.timezone_id,tz:(new Date).getTimezoneOffset()/60,browser_id:e.browser_id,user_id:e.user_id,endpoint:t.endpoint,auth:t.keys.auth,p256dh:t.keys.p256dh,page_url:window.location.pathname,sites_uid:this.sitesUID}}},{key:"subscriptionExisted",value:function(){return!!this.getValue(o.REAIM_UID)}},{key:"saveForRetry",value:function(t){this.setValue(o.REAIM_RETRY_USER,JSON.stringify(t))}},{key:"retrySave",value:(h=l(s.default.mark((function t(){var e,n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getValue(o.REAIM_RETRY_USER),n=this.getValue(o.REAIM_UID),!e||n){t.next=12;break}return t.prev=3,t.next=6,this.saveUser(JSON.parse(e));case 6:this.removeValue(o.REAIM_RETRY_USER),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),this.log("retry_save_failed");case 12:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(){return h.apply(this,arguments)})},{key:"saveUser",value:(f=l(s.default.mark((function t(e){var n,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.subscriptionExisted()){t.next=7;break}return t.next=4,fetch("".concat(this.metaEndpoint,"/refresh"),{method:"POST",body:JSON.stringify({id:this.getValue(o.REAIM_UID),endpoint:e.endpoint,auth:e.auth,p256dh:e.p256dh})});case 4:return t.sent&&this.log("user_updated"),t.abrupt("return");case 7:return t.next=9,fetch("".concat(this.metaEndpoint,"/save"),{method:"POST",body:JSON.stringify(e)});case 9:return n=t.sent,t.next=12,n.text();case 12:r=t.sent,this.setValue(o.REAIM_UID,r),this.setAsSubscribed(),this.htmlDOM&&this.hideModal(),this.log("user_subscribed"),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),this.saveForRetry(e),this.log(t.t0);case 23:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(t){return f.apply(this,arguments)})},{key:"checkIfStillSubscribed",value:function(){"granted"!==Notification.permission&&this.setAsUnsubscribed()}},{key:"tryToSubscribe",value:(p=l(s.default.mark((function t(e){var n,i,a,u,c;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={userVisibleOnly:!0,applicationServerKey:(0,r.urlBase64ToUint8Array)(e.vapid_pub_key)},t.next=4,this.registration.pushManager.subscribe(n);case 4:return i=t.sent,navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:o.REAIM_SAVE_SUBSCRIPTION,subscription:JSON.parse(JSON.stringify(i))}),a=JSON.stringify(i),u=JSON.parse(a),c=this.prepareRequest(u,e),t.next=11,this.saveUser(c);case 11:this.onAllow(),e.wn&&this.showWelcomeNotification(e),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),this.log(t.t0),this.log("user_declined"),this.onBlock();case 20:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(t){return p.apply(this,arguments)})},{key:"showWelcomeNotification",value:function(t){try{var e=JSON.parse(decodeURIComponent(atob(t.wn_content)));this.registration.showNotification(e.title,{body:e.description,data:{url:e.url}})}catch(t){this.log(t)}}},{key:"preloadImage",value:function(t){(new Image).src=t}},{key:"showCustomModal",value:function(t,e){var n=this,r=(0,a.default)(e),o=(0,i.default)(e);e.logo&&this.preloadImage(e.logo);var s=document.createElement("style");s.innerHTML=r;var u=document.createDocumentFragment(),c=document.createElement("div");c.classList.add("reaim-web-modal"),c.classList.add("reaim-web-modal-closed"),c.innerHTML=o,this.htmlDOM=c,c.querySelector(".reaim-button-deny").addEventListener("click",(function(t){n.hideModal(),n.logVisitsNumberWhenDenied()})),c.querySelector(".reaim-button-accept").addEventListener("click",(function(e){n.hideModal(),n.tryToSubscribe(t)})),u.appendChild(c),document.head.appendChild(s),document.body.appendChild(u),c.classList.remove("reaim-web-modal-closed")}},{key:"hideModal",value:function(){this.htmlDOM.style.display="none"}},{key:"enoughVisitsAfterBlock",value:function(t){var e=this.getNumberOfVisitsWhenDenied(),n=this.getVisits();return 0===e||n>=e+t}},{key:"showModal",value:function(t){var e=this;if("custom"===t.prompt_type){var n=JSON.parse(atob(t.prompt));n.showImmediately?(this.log("show_immediately_custom_prompt"),this.showCustomModal(t,n)):this.getVisits()>=n.sessionNumber&&this.enoughVisitsAfterBlock(n.askAgainAfter)&&(this.log("show_timed_custom_prompt"),setTimeout((function(){e.showCustomModal(t,n)}),1e3*n.showAfter))}else this.log("show_native_prompt"),this.tryToSubscribe(t)}},{key:"logVisit",value:function(){var t=this.getValue(o.REAIM_SDK_VISITS)||0;this.setValue(o.REAIM_SDK_VISITS,+t+1)}},{key:"logVisitsNumberWhenDenied",value:function(){var t=this.getValue(o.REAIM_SDK_VISITS);this.setValue(o.REAIM_DENIED_ON_VISITS,t)}},{key:"getNumberOfVisitsWhenDenied",value:function(){var t=JSON.parse(this.getValue(o.REAIM_DENIED_ON_VISITS));return t||0}},{key:"getVisits",value:function(){return JSON.parse(this.getValue(o.REAIM_SDK_VISITS))||0}},{key:"init",value:(c=l(s.default.mark((function t(e){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.logVisit(),this.sitesUID=e,"serviceWorker"in navigator){t.next=4;break}return t.abrupt("return");case 4:if("PushManager"in window){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,this.registerSW();case 8:if(this.registration=t.sent,!this.canSubscribe()){t.next=17;break}return this.log("try_to_subscribe"),t.next=13,this.getMetadata();case 13:n=t.sent,this.showModal(n),t.next=19;break;case 17:this.checkIfStillSubscribed(),this.retrySave();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})}],u=[{key:"trackConversion",value:function(t){var e=new URLSearchParams(window.location.search).get("r_cid");e&&t&&(0,r.isValidToken)(e)&&fetch("".concat(o.REAIM_EVENTS_API,"/conv?t=").concat(e,"&payout=").concat(t))}},{key:"addTags",value:function(t){var e=JSON.parse(localStorage.getItem(o.REAIM_PUSH_USER_SUBSCRIBED)),n=JSON.parse(localStorage.getItem(o.REAIM_UID));e&&n&&(Array.isArray("tags")||"string"!=typeof t||(t=[t]),fetch("".concat(o.REAIM_SUBS_API,"/tags"),{method:"POST",body:JSON.stringify({subscriber:n,tags:t})}))}}],n&&d(e.prototype,n),u&&d(e,u),t}();window.ReAimSDK=p;var f=p;e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){},e.urlBase64ToUint8Array=function(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(n),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r.charCodeAt(i);return o},e.isValidToken=function(t){try{return btoa(atob(t))===t}catch(t){return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){return'\n    <div class="reaim-prompt-content-wrapper">\n      <div class="reaim-prompt-logo-branding">\n        '.concat(t.logo?'\n          <div class="reaim-prompt-logo" style="'.concat(t.logo?"visibility: visible":"visibility: hidden",'">\n            <img src="').concat(t.logo,'" alt="logo">\n          </div>\n        '):"",'\n      </div>\n\n      <div class="reaim-modal-content">\n        <p>').concat(t.actionText,'</p>\n      </div>\n    </div>\n\n    <div class="reaim-prompt-buttons">\n      <small>\n        <a href="https://reaim.me" target="_blank" rel="noopener">\n          ').concat(t.removeBranding?"":"Powered by ReAim",'\n        </a>\n      </small>\n\n      <div>\n        <button class="reaim-button-deny">').concat(t.blockButton,'</button>\n        <button class="reaim-button-accept">').concat(t.allowButton,"</button>\n      </div>\n    </div>\n  ")},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){return"\n    .reaim-web-modal {\n      all: initial;\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: column;\n      position: fixed;\n      max-width: 547px;\n      max-height: 500px;\n      padding: 45px;\n      padding-bottom: 30px;\n      font-size: 14px;\n      font-weight: 100;\n      width: 100%;\n      background: ".concat(t.backgroundColor,";\n      color: ").concat(t.fontColor,';\n      margin: 0 auto;\n      left: 0;\n      right: 0;\n      box-shadow: 1px 2px 20px rgba(0,0,0,0.12), -2px -1px 20px 0px rgba(0,0,0,0.24);\n      border-radius: 0px 0px 8px 8px;\n      top: 0;\n      z-index: 999999;\n      font-family: "Arial", sans-serif;\n      transition-property: all;\n      transition-duration: .5s;\n      transition-timing-function: cubic-bezier(0, 1, 0.5, 1);\n    }\n\n    .reaim-web-modal-closed {\n      max-height: 0;\n    }\n\n    .reaim-web-modal * {\n      all: unset;\n    }\n\n    .reaim-web-modal .reaim-prompt-content-wrapper {\n      display: flex;\n    }\n\n    .reaim-web-modal .reaim-prompt-buttons small a {\n      display: block;\n      color: ').concat(t.fontColor,";\n      position: relative;\n      text-decoration: none;\n      opacity: 0.5;\n      color: #020E17;\n      font-size: 9px;\n      text-decoration: none;\n      cursor: button;\n    }\n\n    .reaim-web-modal .reaim-prompt-logo {\n      width: 80px;\n      height: 80px;\n      margin-right: 30px;\n    }\n\n    .reaim-web-modal .reaim-prompt-logo img {\n      max-width: 80px;\n      width: 100%;\n    }\n\n    .reaim-web-modal .reaim-modal-content {\n      width: 360px;\n      position: relative;\n      margin-left: 20px;\n    }\n\n    .reaim-web-modal .reaim-modal-content p {\n      height: 65px;\n      font-size: 16px;\n      margin-top: 0;\n    }\n\n    .reaim-web-modal .reaim-prompt-buttons {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 25px;\n    }\n\n    .reaim-web-modal .reaim-prompt-buttons button {\n      box-sizing: border-box;\n      height: 52px;\n      border-radius: 8px;\n      cursor: pointer;\n      margin-left: 10px;\n      padding: 10px 20px;\n      border: none;\n      outline: none;\n      font-size: 14px;\n    }\n\n    .reaim-web-modal .reaim-button-deny {\n      background: ").concat(t.blockButtonColor,";\n      color: ").concat(t.blockFontColor,";\n    }\n\n    .reaim-web-modal .reaim-button-accept {\n      background: ").concat(t.allowButtonColor,";\n      color: ").concat(t.allowFontColor,";\n    }\n\n    @media(max-width: 768px) {\n      .reaim-web-modal {\n        max-width: 375px;\n        font-size: 12px;\n        position: fixed;\n        bottom: 0;\n        top: auto;\n        left: 0;\n        right: 0;\n        border-radius: 8px 8px 0px 0px;\n        padding-left: 20px;\n        padding-right: 20px;\n      }\n\n      .reaim-web-modal .reaim-modal-content p {\n        font-size: 14px;\n      }\n\n      .reaim-web-modal .reaim-prompt-logo {\n        width: 68px;\n        height: 68px;\n      }\n\n      .reaim-web-modal .reaim-prompt-buttons {\n        display: flex;\n        margin-top: 10px;\n      }\n\n      .reaim-web-modal .reaim-prompt-buttons button {\n        height: 40px;\n        padding: 10px 15px;\n        font-size: 12px;\n      }\n    }\n\n\n    @media(max-width: 350px) {\n      .reaim-web-modal .reaim-modal-content p {\n        height: 90px;\n      }\n    }\n\n    @media(max-width: 324px) {\n      .reaim-web-modal {\n        padding-left: 20px;\n        padding-right: 20px;\n      }\n\n      .reaim-web-modal .reaim-modal-content p {\n        height: 110px;\n      }\n\n      .reaim-web-modal .reaim-prompt-buttons button {\n        paddding: 10px 10px;\n        font-size: 10px;\n      }\n    }\n  ")},t.exports=e.default}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFpbS13ZWItc2RrL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9yZWFpbS13ZWItc2RrL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3JlYWltLXdlYi1zZGsvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3JlYWltLXdlYi1zZGsvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL3JlYWltLXdlYi1zZGsvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcmVhaW0td2ViLXNkay8uL3NyYy9oZWxwZXJzLmpzIiwid2VicGFjazovL3JlYWltLXdlYi1zZGsvLi9zcmMvaHRtbC5qcyIsIndlYnBhY2s6Ly9yZWFpbS13ZWItc2RrLy4vc3JjL2Nzcy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJydW50aW1lIiwiT3AiLCJoYXNPd24iLCIkU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJpdGVyYXRvciIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwic3RhdGUiLCJtZXRob2QiLCJhcmciLCJFcnJvciIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsIkNvbnRpbnVlU2VudGluZWwiLCJzZW50IiwiX3NlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsInJlY29yZCIsInRyeUNhdGNoIiwidHlwZSIsImRvbmUiLCJtYWtlSW52b2tlTWV0aG9kIiwiZm4iLCJvYmoiLCJlcnIiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiSXRlcmF0b3JQcm90b3R5cGUiLCJnZXRQcm90byIsImdldFByb3RvdHlwZU9mIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJ2YWx1ZXMiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsInJlc29sdmUiLCJyZWplY3QiLCJpbnZva2UiLCJyZXN1bHQiLCJfX2F3YWl0IiwidGhlbiIsInVud3JhcHBlZCIsImVycm9yIiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwiaW5mbyIsInJlc3VsdE5hbWUiLCJuZXh0IiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInB1c2giLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwibGVuZ3RoIiwiY29uc3RydWN0b3IiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIlByb21pc2UiLCJpdGVyIiwidG9TdHJpbmciLCJrZXlzIiwicmV2ZXJzZSIsInBvcCIsInNraXBUZW1wUmVzZXQiLCJwcmV2IiwiY2hhckF0Iiwic2xpY2UiLCJzdG9wIiwicm9vdFJlY29yZCIsInJ2YWwiLCJleGNlcHRpb24iLCJoYW5kbGUiLCJsb2MiLCJjYXVnaHQiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImZpbmlzaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsIkZ1bmN0aW9uIiwiUmVBaW1TREsiLCJvbkFsbG93Iiwib25CbG9jayIsIm1ldGFFbmRwb2ludCIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJ0aW1lem9uZSIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsInJlc29sdmVkT3B0aW9ucyIsInRpbWVab25lIiwiZmV0Y2giLCJyZXNwb25zZSIsImpzb24iLCJtZXRhZGF0YSIsIk5vdGlmaWNhdGlvbiIsInBlcm1pc3Npb24iLCJzZXRWYWx1ZSIsInZhbCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIndpbmRvdyIsIlJFQUlNX1NXX1BBVEhfR0xPQkFMIiwicGF0aCIsImdldFNXUGF0aCIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsInN1YnNjcmlwdGlvbiIsInNpdGVfaWQiLCJjb3VudHJ5X2lkIiwicGxhdGZvcm1faWQiLCJvc19pZCIsInRpbWV6b25lX2lkIiwidHoiLCJEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJicm93c2VyX2lkIiwidXNlcl9pZCIsImVuZHBvaW50IiwiYXV0aCIsInAyNTZkaCIsInBhZ2VfdXJsIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNpdGVzX3VpZCIsInNpdGVzVUlEIiwiZ2V0VmFsdWUiLCJ1c2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwic2F2ZVVzZXIiLCJwYXJzZSIsInJlbW92ZVZhbHVlIiwic3Vic2NyaXB0aW9uRXhpc3RlZCIsImJvZHkiLCJyZXMiLCJ0ZXh0Iiwic2V0QXNTdWJzY3JpYmVkIiwiaHRtbERPTSIsImhpZGVNb2RhbCIsInNhdmVGb3JSZXRyeSIsInNldEFzVW5zdWJzY3JpYmVkIiwic3Vic2NyaXB0aW9uT3B0aW9ucyIsInVzZXJWaXNpYmxlT25seSIsImFwcGxpY2F0aW9uU2VydmVyS2V5IiwidXJsQmFzZTY0VG9VaW50OEFycmF5IiwidmFwaWRfcHViX2tleSIsInJlZ2lzdHJhdGlvbiIsInB1c2hNYW5hZ2VyIiwic3Vic2NyaWJlIiwiY29udHJvbGxlciIsInBvc3RNZXNzYWdlIiwiYWN0aW9uIiwic3RyaW5naWZpZWQiLCJwYXJzZWQiLCJ1c2VyT2JqZWN0IiwicHJlcGFyZVJlcXVlc3QiLCJ3biIsInNob3dXZWxjb21lTm90aWZpY2F0aW9uIiwid25Db250ZW50IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXRvYiIsInduX2NvbnRlbnQiLCJzaG93Tm90aWZpY2F0aW9uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImRhdGEiLCJ1cmwiLCJJbWFnZSIsInNyYyIsInByb21wdE1ldGEiLCJjc3MiLCJodG1sIiwibG9nbyIsInByZWxvYWRJbWFnZSIsIlJlQWltQ1NTIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiUmVBaW1ET00iLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwibG9nVmlzaXRzTnVtYmVyV2hlbkRlbmllZCIsInRyeVRvU3Vic2NyaWJlIiwiYXBwZW5kQ2hpbGQiLCJoZWFkIiwicmVtb3ZlIiwic3R5bGUiLCJkaXNwbGF5IiwidmlzaXROdW1iZXIiLCJ2aXNpdHNXaGVuRGVuaWVkIiwiZ2V0TnVtYmVyT2ZWaXNpdHNXaGVuRGVuaWVkIiwicGFnZXZpZXdzIiwiZ2V0VmlzaXRzIiwicHJvbXB0X3R5cGUiLCJwcm9tcHQiLCJzaG93SW1tZWRpYXRlbHkiLCJzaG93Q3VzdG9tTW9kYWwiLCJzZXNzaW9uTnVtYmVyIiwiZW5vdWdoVmlzaXRzQWZ0ZXJCbG9jayIsImFza0FnYWluQWZ0ZXIiLCJzZXRUaW1lb3V0Iiwic2hvd0FmdGVyIiwidmlzaXRzIiwibG9nVmlzaXQiLCJyZWdpc3RlclNXIiwiY2FuU3Vic2NyaWJlIiwiZ2V0TWV0YWRhdGEiLCJzaG93TW9kYWwiLCJjaGVja0lmU3RpbGxTdWJzY3JpYmVkIiwicmV0cnlTYXZlIiwicGF5b3V0IiwidHJhY2tpbmdJRCIsIlVSTFNlYXJjaFBhcmFtcyIsInNlYXJjaCIsImlzVmFsaWRUb2tlbiIsInRhZ3MiLCJpc1N1YnNjcmliZWQiLCJzaWQiLCJBcnJheSIsImlzQXJyYXkiLCJzdWJzY3JpYmVyIiwiYmFzZTY0U3RyaW5nIiwicGFkZGluZyIsInJlcGVhdCIsImJhc2U2NCIsInJlcGxhY2UiLCJyYXdEYXRhIiwib3V0cHV0QXJyYXkiLCJVaW50OEFycmF5IiwiY2hhckNvZGVBdCIsInN0ciIsImJ0b2EiLCJhY3Rpb25UZXh0IiwicmVtb3ZlQnJhbmRpbmciLCJibG9ja0J1dHRvbiIsImFsbG93QnV0dG9uIiwiYmFja2dyb3VuZENvbG9yIiwiZm9udENvbG9yIiwiYmxvY2tCdXR0b25Db2xvciIsImJsb2NrRm9udENvbG9yIiwiYWxsb3dCdXR0b25Db2xvciIsImFsbG93Rm9udENvbG9yIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLGdCQUFpQixHQUFJ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RUFBV3FFLFlBdkJyRCxrRUF3QjRDckUsRUFBV3NFLFlBeEJ2RCw0Qyw4SENEYSxTQUFDdEUsR0FDZCx3V0Fja0JBLEVBQVd1RSxnQkFkN0IsMkJBZWF2RSxFQUFXd0UsVUFmeEIsaXNCQTJDYXhFLEVBQVd3RSxVQTNDeEIsa3FDQWdHa0J4RSxFQUFXeUUsaUJBaEc3QiwyQkFpR2F6RSxFQUFXMEUsZUFqR3hCLHNGQXFHa0IxRSxFQUFXMkUsaUJBckc3QiwyQkFzR2EzRSxFQUFXNEUsZUF0R3hCLHV1QyIsImZpbGUiOiJpbnN0YWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwicmVhaW0td2ViLXNka1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJyZWFpbS13ZWItc2RrXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInJlYWltLXdlYi1zZGtcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiZXhwb3J0IGNvbnN0IFBST0RVQ1RJT04gPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKTtcbmNvbnN0IExPQ0FMX0VWRU5UU19BUEkgPSAnaHR0cDovL2xvY2FsaG9zdDo1NTU1JztcbmNvbnN0IExPQ0FMX1NVQlNfQVBJID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDM0Myc7XG5jb25zdCBQUk9EX0VWRU5UU19BUEkgPSAnaHR0cHM6Ly9ldmVudHMucmVhaW0ubWUnO1xuY29uc3QgUFJPRF9TVUJTX0FQSSA9ICdodHRwczovL3N1YnMucmVhaW0ubWUnO1xuXG5leHBvcnQgY29uc3QgUkVBSU1fU0RLX1ZJU0lUUyA9ICdyZWFpbV9zZGtfdmlzaXRzJztcbmV4cG9ydCBjb25zdCBSRUFJTV9ERU5JRURfT05fVklTSVRTID0gJ3JlYWltX3Nka19kZW5pZWRfb25fdmlzaXRzJztcbmV4cG9ydCBjb25zdCBSRUFJTV9QVVNIX1VTRVJfU1VCU0NSSUJFRCA9ICdyZWFpbV9zZGtfcHVzaF91c2VyX3N1YnNjcmliZWQnO1xuZXhwb3J0IGNvbnN0IFJFQUlNX1VJRCA9ICdyZWFpbV9zZGtfdWlkJztcbmV4cG9ydCBjb25zdCBSRUFJTV9SRVRSWV9VU0VSID0gJ3JlYWltX3Nka19yZXRyeV91c2VyJztcbmV4cG9ydCBjb25zdCBSRUFJTV9TQVZFX1NVQlNDUklQVElPTiA9ICdyZWFpbV9zYXZlX3N1YnNjcmlwdGlvbic7XG5leHBvcnQgY29uc3QgUkVBSU1fRVZFTlRTX0FQSSA9ICFQUk9EVUNUSU9OID8gTE9DQUxfRVZFTlRTX0FQSSA6IFBST0RfRVZFTlRTX0FQSTtcbmV4cG9ydCBjb25zdCBSRUFJTV9TVUJTX0FQSSA9ICFQUk9EVUNUSU9OID8gTE9DQUxfU1VCU19BUEkgOiBQUk9EX1NVQlNfQVBJO1xuZXhwb3J0IGNvbnN0IFJFQUlNX1NUT1JBR0VfTkFNRSA9ICdyZWFpbV9zZGtfc3RvcmFnZSc7XG5leHBvcnQgY29uc3QgUkVBSU1fSU1QUkVTU0lPTiA9ICdpJztcbmV4cG9ydCBjb25zdCBSRUFJTV9DTElDSyA9ICdjJztcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJpbXBvcnQge1xuICBub29wLFxuICB1cmxCYXNlNjRUb1VpbnQ4QXJyYXksXG4gIGlzVmFsaWRUb2tlblxufSBmcm9tICcuL2hlbHBlcnMnO1xuXG5pbXBvcnQge1xuICBSRUFJTV9TREtfVklTSVRTLFxuICBSRUFJTV9ERU5JRURfT05fVklTSVRTLFxuICBSRUFJTV9QVVNIX1VTRVJfU1VCU0NSSUJFRCxcbiAgUkVBSU1fVUlELFxuICBSRUFJTV9TVUJTX0FQSSxcbiAgUkVBSU1fRVZFTlRTX0FQSSxcbiAgUkVBSU1fU0FWRV9TVUJTQ1JJUFRJT04sXG4gIFBST0RVQ1RJT04sXG4gIFJFQUlNX1JFVFJZX1VTRVJcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5pbXBvcnQgcmVuZGVyVUkgZnJvbSAnLi9odG1sJztcbmltcG9ydCByZW5kZXJTdHlsZXMgZnJvbSAnLi9jc3MnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHJlZ2VuZXJhdG9yUnVudGltZSBmcm9tICdyZWdlbmVyYXRvci1ydW50aW1lJztcbi8qIGVzbGludC1lbmFibGUgKi9cblxuY2xhc3MgUmVBaW1TREsge1xuICBjb25zdHJ1Y3RvcihvbkFsbG93LCBvbkJsb2NrKSB7XG4gICAgaWYgKG9uQWxsb3cgJiYgdHlwZW9mIG9uQWxsb3cgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVHlwZSBvZiBvbkFsbG93IHBhcmFtZXRlciBzaG91bGQgYmUgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgaWYgKG9uQmxvY2sgJiYgdHlwZW9mIG9uQmxvY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVHlwZSBvZiBvbkJsb2NrIHBhcmFtZXRlciBzaG91bGQgYmUgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5tZXRhRW5kcG9pbnQgPSBSRUFJTV9TVUJTX0FQSTtcbiAgICB0aGlzLm9uQWxsb3cgPSBvbkFsbG93IHx8IG5vb3A7XG4gICAgdGhpcy5vbkJsb2NrID0gb25CbG9jayB8fCBub29wO1xuICB9XG5cbiAgbG9nKG1zZykge1xuICAgIGNvbnNvbGUubG9nKCdSZUFpbSBTREsgLScsIG1zZyk7XG4gIH1cblxuICBhc3luYyBnZXRNZXRhZGF0YSgpIHtcbiAgICBjb25zdCB0aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMubWV0YUVuZHBvaW50ICsgJy9pbmZvP3R6PScgKyB0aW1lem9uZSk7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICByZXR1cm4gbWV0YWRhdGE7XG4gIH1cblxuICBjYW5TdWJzY3JpYmUoKSB7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVmYXVsdCc7XG4gIH1cblxuICBzZXRBc1N1YnNjcmliZWQoKSB7XG4gICAgdGhpcy5zZXRWYWx1ZShSRUFJTV9QVVNIX1VTRVJfU1VCU0NSSUJFRCwgdHJ1ZSk7XG4gIH1cblxuICBzZXRBc1Vuc3Vic2NyaWJlZCgpIHtcbiAgICB0aGlzLnNldFZhbHVlKFJFQUlNX1BVU0hfVVNFUl9TVUJTQ1JJQkVELCBmYWxzZSk7XG4gIH1cblxuICBzZXRWYWx1ZShrZXksIHZhbCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsKTtcbiAgfVxuXG4gIHJlbW92ZVZhbHVlKGtleSkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gIH1cblxuICBnZXRWYWx1ZShrZXkpIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgfVxuXG4gIGdldFNXUGF0aCgpIHtcbiAgICBjb25zdCBwYXRoID0gIVBST0RVQ1RJT04gP1xuICAgICAgJy9yZWFpbS1zdy5qcycgOlxuICAgICAgKHNlbGYud2luZG93ICYmIHNlbGYud2luZG93LlJFQUlNX1NXX1BBVEhfR0xPQkFMIHx8ICcvc3cuanMnKTtcblxuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgcmVnaXN0ZXJTVygpIHtcbiAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRTV1BhdGgoKTtcblxuICAgIHJldHVybiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihwYXRoKTtcbiAgfVxuXG4gIHByZXBhcmVSZXF1ZXN0KHN1YnNjcmlwdGlvbiwgbWV0YWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2l0ZV9pZDogbWV0YWRhdGEuc2l0ZV9pZCxcbiAgICAgIGNvdW50cnlfaWQ6IG1ldGFkYXRhLmNvdW50cnlfaWQsXG4gICAgICBwbGF0Zm9ybV9pZDogbWV0YWRhdGEucGxhdGZvcm1faWQsXG4gICAgICBvc19pZDogbWV0YWRhdGEub3NfaWQsXG4gICAgICB0aW1lem9uZV9pZDogbWV0YWRhdGEudGltZXpvbmVfaWQsXG4gICAgICB0ejogbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjAsXG4gICAgICBicm93c2VyX2lkOiBtZXRhZGF0YS5icm93c2VyX2lkLFxuICAgICAgdXNlcl9pZDogbWV0YWRhdGEudXNlcl9pZCxcbiAgICAgIGVuZHBvaW50OiBzdWJzY3JpcHRpb24uZW5kcG9pbnQsXG4gICAgICBhdXRoOiBzdWJzY3JpcHRpb24ua2V5cy5hdXRoLFxuICAgICAgcDI1NmRoOiBzdWJzY3JpcHRpb24ua2V5cy5wMjU2ZGgsXG4gICAgICBwYWdlX3VybDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgc2l0ZXNfdWlkOiB0aGlzLnNpdGVzVUlEXG4gICAgfTtcbiAgfVxuXG4gIHN1YnNjcmlwdGlvbkV4aXN0ZWQoKSB7XG4gICAgcmV0dXJuICEhKHRoaXMuZ2V0VmFsdWUoUkVBSU1fVUlEKSk7XG4gIH1cblxuICBzYXZlRm9yUmV0cnkodXNlcikge1xuICAgIHRoaXMuc2V0VmFsdWUoUkVBSU1fUkVUUllfVVNFUiwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICB9XG5cbiAgYXN5bmMgcmV0cnlTYXZlKCkge1xuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmdldFZhbHVlKFJFQUlNX1JFVFJZX1VTRVIpO1xuICAgIGNvbnN0IGlkID0gdGhpcy5nZXRWYWx1ZShSRUFJTV9VSUQpO1xuXG4gICAgaWYgKHVzZXIgJiYgIWlkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVVc2VyKEpTT04ucGFyc2UodXNlcikpO1xuICAgICAgICB0aGlzLnJlbW92ZVZhbHVlKFJFQUlNX1JFVFJZX1VTRVIpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMubG9nKCdyZXRyeV9zYXZlX2ZhaWxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNhdmVVc2VyKHVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uRXhpc3RlZCgpKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IGF3YWl0IGZldGNoKGAke3RoaXMubWV0YUVuZHBvaW50fS9yZWZyZXNoYCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmdldFZhbHVlKFJFQUlNX1VJRCksXG4gICAgICAgICAgICBlbmRwb2ludDogdXNlci5lbmRwb2ludCxcbiAgICAgICAgICAgIGF1dGg6IHVzZXIuYXV0aCxcbiAgICAgICAgICAgIHAyNTZkaDogdXNlci5wMjU2ZGhcbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodXBkYXRlKSB7XG4gICAgICAgICAgdGhpcy5sb2coJ3VzZXJfdXBkYXRlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLm1ldGFFbmRwb2ludH0vc2F2ZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXIpXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgaWQgPSBhd2FpdCByZXMudGV4dCgpO1xuXG4gICAgICB0aGlzLnNldFZhbHVlKFJFQUlNX1VJRCwgaWQpO1xuICAgICAgdGhpcy5zZXRBc1N1YnNjcmliZWQoKTtcblxuICAgICAgaWYgKHRoaXMuaHRtbERPTSkge1xuICAgICAgICB0aGlzLmhpZGVNb2RhbCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmxvZygndXNlcl9zdWJzY3JpYmVkJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLnNhdmVGb3JSZXRyeSh1c2VyKTtcbiAgICAgIHRoaXMubG9nKGVycik7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tJZlN0aWxsU3Vic2NyaWJlZCgpIHtcbiAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdncmFudGVkJykgcmV0dXJuO1xuICAgIHRoaXMuc2V0QXNVbnN1YnNjcmliZWQoKTtcbiAgfVxuXG4gIGFzeW5jIHRyeVRvU3Vic2NyaWJlKG1ldGFkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIHVzZXJWaXNpYmxlT25seTogdHJ1ZSxcbiAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHVybEJhc2U2NFRvVWludDhBcnJheShtZXRhZGF0YS52YXBpZF9wdWJfa2V5KVxuICAgICAgfTtcblxuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgdGhpcy5yZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbk9wdGlvbnMpO1xuXG4gICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICBhY3Rpb246IFJFQUlNX1NBVkVfU1VCU0NSSVBUSU9OLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbjogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdWJzY3JpcHRpb24pKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RyaW5naWZpZWQgPSBKU09OLnN0cmluZ2lmeShzdWJzY3JpcHRpb24pO1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzdHJpbmdpZmllZCk7XG4gICAgICBjb25zdCB1c2VyT2JqZWN0ID0gdGhpcy5wcmVwYXJlUmVxdWVzdChwYXJzZWQsIG1ldGFkYXRhKTtcblxuICAgICAgYXdhaXQgdGhpcy5zYXZlVXNlcih1c2VyT2JqZWN0KTtcblxuICAgICAgdGhpcy5vbkFsbG93KCk7XG5cbiAgICAgIGlmIChtZXRhZGF0YS53bikge1xuICAgICAgICB0aGlzLnNob3dXZWxjb21lTm90aWZpY2F0aW9uKG1ldGFkYXRhKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMubG9nKGVycik7XG4gICAgICB0aGlzLmxvZygndXNlcl9kZWNsaW5lZCcpO1xuICAgICAgdGhpcy5vbkJsb2NrKCk7XG4gICAgfVxuICB9XG5cbiAgc2hvd1dlbGNvbWVOb3RpZmljYXRpb24obWV0YWRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgd25Db250ZW50ID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYXRvYihtZXRhZGF0YS53bl9jb250ZW50KSkpO1xuXG4gICAgICB0aGlzLnJlZ2lzdHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKHduQ29udGVudC50aXRsZSwge1xuICAgICAgICBib2R5OiB3bkNvbnRlbnQuZGVzY3JpcHRpb24sXG4gICAgICAgIGRhdGE6IHsgdXJsOiB3bkNvbnRlbnQudXJsIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5sb2coZXJyKTtcbiAgICB9XG4gIH1cblxuICBwcmVsb2FkSW1hZ2UodXJsKSB7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG5cbiAgICBpbWcuc3JjID0gdXJsO1xuICB9XG5cbiAgc2hvd0N1c3RvbU1vZGFsKG1ldGFkYXRhLCBwcm9tcHRNZXRhKSB7XG4gICAgY29uc3QgY3NzID0gcmVuZGVyU3R5bGVzKHByb21wdE1ldGEpO1xuICAgIGNvbnN0IGh0bWwgPSByZW5kZXJVSShwcm9tcHRNZXRhKTtcblxuICAgIGlmIChwcm9tcHRNZXRhLmxvZ28pIHtcbiAgICAgIHRoaXMucHJlbG9hZEltYWdlKHByb21wdE1ldGEubG9nbyk7XG4gICAgfVxuXG4gICAgY29uc3QgUmVBaW1DU1MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgUmVBaW1DU1MuaW5uZXJIVE1MID0gY3NzO1xuXG4gICAgY29uc3QgUmVBaW1ET00gPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgY29uc3QgaHRtbERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgaHRtbERPTS5jbGFzc0xpc3QuYWRkKCdyZWFpbS13ZWItbW9kYWwnKTtcbiAgICBodG1sRE9NLmNsYXNzTGlzdC5hZGQoJ3JlYWltLXdlYi1tb2RhbC1jbG9zZWQnKTtcbiAgICBodG1sRE9NLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICB0aGlzLmh0bWxET00gPSBodG1sRE9NO1xuXG4gICAgY29uc3QgJGRlbnkgPSBodG1sRE9NLnF1ZXJ5U2VsZWN0b3IoJy5yZWFpbS1idXR0b24tZGVueScpO1xuXG4gICAgJGRlbnkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgIHRoaXMubG9nVmlzaXRzTnVtYmVyV2hlbkRlbmllZCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgJGFjY2VwdCA9IGh0bWxET00ucXVlcnlTZWxlY3RvcignLnJlYWltLWJ1dHRvbi1hY2NlcHQnKTtcblxuICAgICRhY2NlcHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgdGhpcy5oaWRlTW9kYWwoKTtcbiAgICAgIHRoaXMudHJ5VG9TdWJzY3JpYmUobWV0YWRhdGEpO1xuICAgIH0pO1xuXG4gICAgUmVBaW1ET00uYXBwZW5kQ2hpbGQoaHRtbERPTSk7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChSZUFpbUNTUyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChSZUFpbURPTSk7XG5cbiAgICBodG1sRE9NLmNsYXNzTGlzdC5yZW1vdmUoJ3JlYWltLXdlYi1tb2RhbC1jbG9zZWQnKTtcbiAgfVxuXG4gIGhpZGVNb2RhbCgpIHtcbiAgICB0aGlzLmh0bWxET00uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuXG4gIGVub3VnaFZpc2l0c0FmdGVyQmxvY2sodmlzaXROdW1iZXIpIHtcbiAgICBjb25zdCB2aXNpdHNXaGVuRGVuaWVkID0gdGhpcy5nZXROdW1iZXJPZlZpc2l0c1doZW5EZW5pZWQoKTtcbiAgICBjb25zdCBwYWdldmlld3MgPSB0aGlzLmdldFZpc2l0cygpO1xuXG4gICAgaWYgKHZpc2l0c1doZW5EZW5pZWQgIT09IDApIHtcbiAgICAgIGlmIChwYWdldmlld3MgPj0gKHZpc2l0c1doZW5EZW5pZWQgKyB2aXNpdE51bWJlcikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG5cbiAgfVxuXG4gIHNob3dNb2RhbChtZXRhZGF0YSkge1xuICAgIGlmIChtZXRhZGF0YS5wcm9tcHRfdHlwZSA9PT0gJ2N1c3RvbScpIHtcbiAgICAgIGNvbnN0IHByb21wdE1ldGEgPSBKU09OLnBhcnNlKGF0b2IobWV0YWRhdGEucHJvbXB0KSk7XG5cbiAgICAgIGlmIChwcm9tcHRNZXRhLnNob3dJbW1lZGlhdGVseSkge1xuICAgICAgICB0aGlzLmxvZygnc2hvd19pbW1lZGlhdGVseV9jdXN0b21fcHJvbXB0Jyk7XG4gICAgICAgIHRoaXMuc2hvd0N1c3RvbU1vZGFsKG1ldGFkYXRhLCBwcm9tcHRNZXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZpc2l0cyA9IHRoaXMuZ2V0VmlzaXRzKCk7XG5cbiAgICAgICAgaWYgKHZpc2l0cyA+PSBwcm9tcHRNZXRhLnNlc3Npb25OdW1iZXIgJiYgdGhpcy5lbm91Z2hWaXNpdHNBZnRlckJsb2NrKHByb21wdE1ldGEuYXNrQWdhaW5BZnRlcikpIHtcbiAgICAgICAgICB0aGlzLmxvZygnc2hvd190aW1lZF9jdXN0b21fcHJvbXB0Jyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNob3dDdXN0b21Nb2RhbChtZXRhZGF0YSwgcHJvbXB0TWV0YSk7XG4gICAgICAgICAgfSwgcHJvbXB0TWV0YS5zaG93QWZ0ZXIgKiAxMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZygnc2hvd19uYXRpdmVfcHJvbXB0Jyk7XG4gICAgICB0aGlzLnRyeVRvU3Vic2NyaWJlKG1ldGFkYXRhKTtcbiAgICB9XG4gIH1cblxuICBsb2dWaXNpdCgpIHtcbiAgICBjb25zdCB2aXNpdHMgPSB0aGlzLmdldFZhbHVlKFJFQUlNX1NES19WSVNJVFMpIHx8IDA7XG5cbiAgICB0aGlzLnNldFZhbHVlKFJFQUlNX1NES19WSVNJVFMsICt2aXNpdHMgKyAxKTtcbiAgfVxuXG4gIGxvZ1Zpc2l0c051bWJlcldoZW5EZW5pZWQoKSB7XG4gICAgY29uc3QgdmlzaXRzID0gdGhpcy5nZXRWYWx1ZShSRUFJTV9TREtfVklTSVRTKTtcblxuICAgIHRoaXMuc2V0VmFsdWUoUkVBSU1fREVOSUVEX09OX1ZJU0lUUywgdmlzaXRzKTtcbiAgfVxuXG4gIGdldE51bWJlck9mVmlzaXRzV2hlbkRlbmllZCgpIHtcbiAgICBjb25zdCB2aXNpdHMgPSBKU09OLnBhcnNlKHRoaXMuZ2V0VmFsdWUoUkVBSU1fREVOSUVEX09OX1ZJU0lUUykpO1xuXG4gICAgaWYgKHZpc2l0cykge1xuICAgICAgcmV0dXJuIHZpc2l0cztcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGdldFZpc2l0cygpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmdldFZhbHVlKFJFQUlNX1NES19WSVNJVFMpKSB8fCAwO1xuICB9XG5cbiAgc3RhdGljIHRyYWNrQ29udmVyc2lvbihwYXlvdXQpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgIGNvbnN0IHRyYWNraW5nSUQgPSBwYXJhbXMuZ2V0KCdyX2NpZCcpO1xuXG4gICAgaWYgKHRyYWNraW5nSUQgJiYgcGF5b3V0ICYmIGlzVmFsaWRUb2tlbih0cmFja2luZ0lEKSkge1xuICAgICAgZmV0Y2goYCR7UkVBSU1fRVZFTlRTX0FQSX0vY29udj90PSR7dHJhY2tpbmdJRH0mcGF5b3V0PSR7cGF5b3V0fWApO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhZGRUYWdzKHRhZ3MpIHtcbiAgICBjb25zdCBpc1N1YnNjcmliZWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFJFQUlNX1BVU0hfVVNFUl9TVUJTQ1JJQkVEKSk7XG4gICAgY29uc3Qgc2lkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRUFJTV9VSUQpKTtcblxuICAgIGlmICghaXNTdWJzY3JpYmVkIHx8ICFzaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoJ3RhZ3MnKSAmJiB0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRhZ3MgPSBbdGFnc107XG4gICAgfVxuXG4gICAgZmV0Y2goYCR7UkVBSU1fU1VCU19BUEl9L3RhZ3NgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3Vic2NyaWJlcjogc2lkLFxuICAgICAgICB0YWdzXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgaW5pdChzaXRlc1VJRCkge1xuICAgIHRoaXMubG9nVmlzaXQoKTtcbiAgICB0aGlzLnNpdGVzVUlEID0gc2l0ZXNVSUQ7XG5cbiAgICBpZiAoISgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSkgcmV0dXJuO1xuICAgIGlmICghKCdQdXNoTWFuYWdlcicgaW4gd2luZG93KSkgcmV0dXJuO1xuXG4gICAgdGhpcy5yZWdpc3RyYXRpb24gPSBhd2FpdCB0aGlzLnJlZ2lzdGVyU1coKTtcblxuICAgIGlmICh0aGlzLmNhblN1YnNjcmliZSgpKSB7XG4gICAgICB0aGlzLmxvZygndHJ5X3RvX3N1YnNjcmliZScpO1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCk7XG5cbiAgICAgIHRoaXMuc2hvd01vZGFsKG1ldGFkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGVja0lmU3RpbGxTdWJzY3JpYmVkKCk7XG4gICAgICB0aGlzLnJldHJ5U2F2ZSgpO1xuICAgIH1cbiAgfVxufVxuXG53aW5kb3cuUmVBaW1TREsgPSBSZUFpbVNESztcbmV4cG9ydCBkZWZhdWx0IFJlQWltU0RLO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gdXJsQmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NFN0cmluZykge1xuICBsZXQgcGFkZGluZyA9ICc9Jy5yZXBlYXQoKDQgLSBiYXNlNjRTdHJpbmcubGVuZ3RoICUgNCkgJSA0KTtcbiAgbGV0IGJhc2U2NCA9IChiYXNlNjRTdHJpbmcgKyBwYWRkaW5nKVxuICAgIC5yZXBsYWNlKC9cXC0vZywgJysnKVxuICAgIC5yZXBsYWNlKC9fL2csICcvJyk7XG5cbiAgbGV0IHJhd0RhdGEgPSB3aW5kb3cuYXRvYihiYXNlNjQpO1xuICBsZXQgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXdEYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgb3V0cHV0QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dEFycmF5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFRva2VuKHN0cikge1xuICB0cnkge1xuICAgIHJldHVybiBidG9hKGF0b2Ioc3RyKSkgPT09IHN0cjtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCAocHJvbXB0TWV0YSkgPT4ge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJyZWFpbS1wcm9tcHQtY29udGVudC13cmFwcGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicmVhaW0tcHJvbXB0LWxvZ28tYnJhbmRpbmdcIj5cbiAgICAgICAgJHtwcm9tcHRNZXRhLmxvZ28gPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInJlYWltLXByb21wdC1sb2dvXCIgc3R5bGU9XCIke3Byb21wdE1ldGEubG9nbyA/ICd2aXNpYmlsaXR5OiB2aXNpYmxlJyA6ICd2aXNpYmlsaXR5OiBoaWRkZW4nfVwiPlxuICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb21wdE1ldGEubG9nb31cIiBhbHQ9XCJsb2dvXCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwicmVhaW0tbW9kYWwtY29udGVudFwiPlxuICAgICAgICA8cD4ke3Byb21wdE1ldGEuYWN0aW9uVGV4dH08L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJyZWFpbS1wcm9tcHQtYnV0dG9uc1wiPlxuICAgICAgPHNtYWxsPlxuICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9yZWFpbS5tZVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCI+XG4gICAgICAgICAgJHtwcm9tcHRNZXRhLnJlbW92ZUJyYW5kaW5nID8gJycgOiAnUG93ZXJlZCBieSBSZUFpbSd9XG4gICAgICAgIDwvYT5cbiAgICAgIDwvc21hbGw+XG5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJyZWFpbS1idXR0b24tZGVueVwiPiR7cHJvbXB0TWV0YS5ibG9ja0J1dHRvbn08L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInJlYWltLWJ1dHRvbi1hY2NlcHRcIj4ke3Byb21wdE1ldGEuYWxsb3dCdXR0b259PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCAocHJvbXB0TWV0YSkgPT4ge1xuICByZXR1cm4gYFxuICAgIC5yZWFpbS13ZWItbW9kYWwge1xuICAgICAgYWxsOiBpbml0aWFsO1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgbWF4LXdpZHRoOiA1NDdweDtcbiAgICAgIG1heC1oZWlnaHQ6IDUwMHB4O1xuICAgICAgcGFkZGluZzogNDVweDtcbiAgICAgIHBhZGRpbmctYm90dG9tOiAzMHB4O1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgZm9udC13ZWlnaHQ6IDEwMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgYmFja2dyb3VuZDogJHtwcm9tcHRNZXRhLmJhY2tncm91bmRDb2xvcn07XG4gICAgICBjb2xvcjogJHtwcm9tcHRNZXRhLmZvbnRDb2xvcn07XG4gICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJveC1zaGFkb3c6IDFweCAycHggMjBweCByZ2JhKDAsMCwwLDAuMTIpLCAtMnB4IC0xcHggMjBweCAwcHggcmdiYSgwLDAsMCwwLjI0KTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDBweCAwcHggOHB4IDhweDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHotaW5kZXg6IDk5OTk5OTtcbiAgICAgIGZvbnQtZmFtaWx5OiBcIkFyaWFsXCIsIHNhbnMtc2VyaWY7XG4gICAgICB0cmFuc2l0aW9uLXByb3BlcnR5OiBhbGw7XG4gICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAuNXM7XG4gICAgICB0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAsIDEsIDAuNSwgMSk7XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbC1jbG9zZWQge1xuICAgICAgbWF4LWhlaWdodDogMDtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsICoge1xuICAgICAgYWxsOiB1bnNldDtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1wcm9tcHQtY29udGVudC13cmFwcGVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tcHJvbXB0LWJ1dHRvbnMgc21hbGwgYSB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGNvbG9yOiAke3Byb21wdE1ldGEuZm9udENvbG9yfTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgIGNvbG9yOiAjMDIwRTE3O1xuICAgICAgZm9udC1zaXplOiA5cHg7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICBjdXJzb3I6IGJ1dHRvbjtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1wcm9tcHQtbG9nbyB7XG4gICAgICB3aWR0aDogODBweDtcbiAgICAgIGhlaWdodDogODBweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMzBweDtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1wcm9tcHQtbG9nbyBpbWcge1xuICAgICAgbWF4LXdpZHRoOiA4MHB4O1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tbW9kYWwtY29udGVudCB7XG4gICAgICB3aWR0aDogMzYwcHg7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1tb2RhbC1jb250ZW50IHAge1xuICAgICAgaGVpZ2h0OiA2NXB4O1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICB9XG5cbiAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1wcm9tcHQtYnV0dG9ucyB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIG1hcmdpbi10b3A6IDI1cHg7XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tcHJvbXB0LWJ1dHRvbnMgYnV0dG9uIHtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBoZWlnaHQ6IDUycHg7XG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tYnV0dG9uLWRlbnkge1xuICAgICAgYmFja2dyb3VuZDogJHtwcm9tcHRNZXRhLmJsb2NrQnV0dG9uQ29sb3J9O1xuICAgICAgY29sb3I6ICR7cHJvbXB0TWV0YS5ibG9ja0ZvbnRDb2xvcn07XG4gICAgfVxuXG4gICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tYnV0dG9uLWFjY2VwdCB7XG4gICAgICBiYWNrZ3JvdW5kOiAke3Byb21wdE1ldGEuYWxsb3dCdXR0b25Db2xvcn07XG4gICAgICBjb2xvcjogJHtwcm9tcHRNZXRhLmFsbG93Rm9udENvbG9yfTtcbiAgICB9XG5cbiAgICBAbWVkaWEobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgLnJlYWltLXdlYi1tb2RhbCB7XG4gICAgICAgIG1heC13aWR0aDogMzc1cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHRvcDogYXV0bztcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweCA4cHggMHB4IDBweDtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1tb2RhbC1jb250ZW50IHAge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5yZWFpbS13ZWItbW9kYWwgLnJlYWltLXByb21wdC1sb2dvIHtcbiAgICAgICAgd2lkdGg6IDY4cHg7XG4gICAgICAgIGhlaWdodDogNjhweDtcbiAgICAgIH1cblxuICAgICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tcHJvbXB0LWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAucmVhaW0td2ViLW1vZGFsIC5yZWFpbS1wcm9tcHQtYnV0dG9ucyBidXR0b24ge1xuICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgQG1lZGlhKG1heC13aWR0aDogMzUwcHgpIHtcbiAgICAgIC5yZWFpbS13ZWItbW9kYWwgLnJlYWltLW1vZGFsLWNvbnRlbnQgcCB7XG4gICAgICAgIGhlaWdodDogOTBweDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBAbWVkaWEobWF4LXdpZHRoOiAzMjRweCkge1xuICAgICAgLnJlYWltLXdlYi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tbW9kYWwtY29udGVudCBwIHtcbiAgICAgICAgaGVpZ2h0OiAxMTBweDtcbiAgICAgIH1cblxuICAgICAgLnJlYWltLXdlYi1tb2RhbCAucmVhaW0tcHJvbXB0LWJ1dHRvbnMgYnV0dG9uIHtcbiAgICAgICAgcGFkZGRpbmc6IDEwcHggMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuICAgIH1cbiAgYDtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9